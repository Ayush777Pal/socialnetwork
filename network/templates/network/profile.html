{% extends "network/layout.html" %}

{% block body %}
<div class="profile-container">
  <div class="profile-header">
    <i>ðŸ‘¤</i>
    <h2>{{ username }}</h2>
  </div>

  {% if user.is_authenticated and user != user_profile %}
    <div class="profile-follow">
      {% if isFollowing %}
        <form action="{% url 'unfollow' %}" method="post">
          {% csrf_token %}
          <input type="hidden" name="userfollow" value="{{ user_profile }}">
          <button type="submit">Unfollow</button>
        </form>
      {% else %}
        <form action="{% url 'follow' %}" method="post">
          {% csrf_token %}
          <input type="hidden" name="userfollow" value="{{ user_profile }}">
          <button type="submit">Follow</button>
        </form>
      {% endif %}
    </div>
  {% endif %}

  <div class="profile-stats">
    <div>Followers: {{ followers.count }}</div>
    <div>Following: {{ following.count }}</div>
  </div>
</div>

{% for post in posts_of_the_page %}
  <div class="post-card">
    <h4><a href="{% url 'profile' user_id=post.user.id %}">@{{ post.user }}</a></h4>
    <p>{{ post.content }}</p>
    <small>{{ post.date }}</small>
  </div>
{% endfor %}

<div class="pagination">
  {% if posts_of_the_page.has_previous %}
    <a href="?page={{ posts_of_the_page.previous_page_number }}">Previous</a>
  {% endif %}
  {% if posts_of_the_page.has_next %}
    <a href="?page={{ posts_of_the_page.next_page_number }}">Next</a>
  {% endif %}
</div>
{% endblock %}